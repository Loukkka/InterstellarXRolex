<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Interstellar X Rolex - VR</title>
	<style>
		body { margin: 0; background: #000; }
		#clock-audio { display: none; }
		#hud {
			position: fixed;
			top: 16px;
			left: 16px;
			padding: 14px 18px;
			background: rgba(5, 8, 20, 0.85);
			border: 1px solid rgba(217, 176, 102, 0.5);
			border-radius: 10px;
			max-width: 340px;
			font: 14px/1.4 "Helvetica Neue", sans-serif;
			color: #e0e0e0;
			z-index: 100;
		}
		#hud strong { color: #d9b066; }
		#debug {
			position: fixed;
			bottom: 16px;
			left: 16px;
			padding: 10px 14px;
			background: rgba(0,0,0,0.8);
			color: #0f0;
			font: 12px monospace;
			z-index: 100;
			border-radius: 6px;
		}
	</style>
	<script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
	<script>
		// === AUDIO HORLOGE: Gestion de la vitesse de lecture ===
		let clockAudio = null;
		
		document.addEventListener("DOMContentLoaded", () => {
			clockAudio = document.getElementById("clock-audio");
			clockAudio.volume = 1.0;
			clockAudio.playbackRate = 1.0; // Vitesse normale par défaut
			
			const startClockAudio = () => {
				clockAudio.play().catch(e => console.log("Audio play prevented:", e));
				document.removeEventListener("click", startClockAudio);
				document.removeEventListener("keydown", startClockAudio);
			};
			
			document.addEventListener("click", startClockAudio);
			document.addEventListener("keydown", startClockAudio);
		});
		
		// === AUDIO MANAGER: Contrôle la vitesse du son ===
		function setClockSpeed(speed) {
			if (clockAudio) {
				clockAudio.playbackRate = speed;
				document.getElementById("debug").textContent = "Vitesse: x" + speed;
			}
		}
		
		// === PAUSE/RESUME: Arrête et reprend le temps ===
		function pauseClockAudio() {
			if (clockAudio && !clockAudio.paused) {
				clockAudio.pause();
				document.getElementById("debug").textContent = "TEMPS ARRÊTÉ";
			}
		}
		
		function resumeClockAudio() {
			if (clockAudio && clockAudio.paused) {
				clockAudio.play().catch(e => console.log("Audio resume prevented:", e));
				document.getElementById("debug").textContent = "Vitesse: x1";
			}
		}

		// === SKYBOX: Contrôle l'expansion/contraction de l'espace ===
		function setSpaceScale(scale, duration) {
			const skybox = document.getElementById("skybox");
			if (skybox) {
				skybox.removeAttribute("animation__scale");
				skybox.setAttribute("animation__scale", {
					property: "scale",
					to: scale + " " + scale + " " + scale,
					dur: duration,
					easing: "easeInOutQuad"
				});
			}
		}

		// === BOOKSHELF: Contrôle la vitesse d'apparition des livres ===
		let bookSpawnSpeed = 1.0; // Multiplicateur de vitesse (0.5 = lent, 2 = rapide)
		
		function setBookSpawnSpeed(speed) {
			bookSpawnSpeed = speed;
		}

		// === BOOKSHELF SPAWNER: Fait apparaître les livres progressivement ===
		AFRAME.registerComponent("bookshelf-spawner", {
			schema: {
				baseInterval: { type: "number", default: 3000 }, // Intervalle de base en ms
				maxBooks: { type: "number", default: 24 },
				buildDelay: { type: "number", default: 500 } // Délai entre chaque planche
			},
			
			// Génère des positions Z aléatoires pour chaque étage (3-6 livres par étage)
			generateRandomBookPositions() {
				const positions = [];
				const etages = [
					{ x: 0.10, y: 1.25 },  // Étage 1 (bas)
					{ x: 0.10, y: 1.67 },  // Étage 2 (milieu)
					{ x: 0.10, y: 2.05 },  // Étage 3 (haut)
					{ x: 0.10, y: 2.45 }   // Étage 4 (très haut)
				];
				
				const zMin = -1.2;
				const zMax = 0.2;
				const minSpacing = 0.1;
				
				etages.forEach(etage => {
					// Nombre aléatoire de livres entre 3 et 6
					const numBooks = Math.floor(Math.random() * 4) + 3;
					const zPositions = [];
					
					// Générer des positions Z aléatoires avec espacement minimum
					let attempts = 0;
					while (zPositions.length < numBooks && attempts < 100) {
						const z = zMin + Math.random() * (zMax - zMin);
						
						// Vérifier l'espacement avec les autres livres
						let valid = true;
						for (const existingZ of zPositions) {
							if (Math.abs(z - existingZ) < minSpacing) {
								valid = false;
								break;
							}
						}
						
						if (valid) {
							zPositions.push(z);
						}
						attempts++;
					}
					
					// Trier les positions Z pour un placement ordonné
					zPositions.sort((a, b) => b - a);
					
					// Ajouter les positions avec légère variation sur X
					zPositions.forEach(z => {
						positions.push({
							x: etage.x + (Math.random() * 0.04 - 0.02), // Petite variation X
							y: etage.y,
							z: z
						});
					});
				});
				
				return positions;
			},
			
			init() {
				this.books = [];
				this.bookIndex = 0;
				this.lastSpawnTime = 0;
				this.started = false;
				this.shelfBuilt = false;
				this.buildIndex = 0;
				
				// Génère des positions aléatoires pour les livres sur chaque étage
				this.bookPositions = this.generateRandomBookPositions();



				
				// Couleurs des livres (24 couleurs)
				this.bookColors = [
					"#8B4513", "#2F4F4F", "#8B0000", "#191970",
					"#006400", "#4B0082", "#B8860B", "#2E8B57",
					"#800000", "#483D8B", "#556B2F", "#8B008B",
					"#CD853F", "#708090", "#DC143C", "#4169E1",
					"#228B22", "#9932CC", "#DAA520", "#20B2AA",
					"#A52A2A", "#6A5ACD", "#808000", "#C71585"
				];
				
				// Éléments de l'étagère à construire
				this.shelfParts = [];
				
				// Démarrer après un clic
const startSpawning = () => {
    // Délai de 5 secondes avant de commencer à faire apparaître les livres
    setTimeout(() => {
        this.started = true;
        this.lastSpawnTime = performance.now();
        this.buildShelf();
        console.log("Les livres commencent à apparaître !");
    }, 5000); // 5000 ms = 5 secondes
    
    document.removeEventListener("click", startSpawning);
};
document.addEventListener("click", startSpawning);


			},
					buildShelf() {
				// L'étagère GLB est déjà construite, on peut commencer à spawner les livres
				this.shelfBuilt = true;
				this.lastSpawnTime = performance.now();
			},
			buildNextPart() {
				if (this.buildIndex >= this.shelfParts.length) {
					this.shelfBuilt = true;
					this.lastSpawnTime = performance.now();
					console.log("Étagère construite!");
					return;
				}
				
				const part = this.shelfParts[this.buildIndex];
				part.setAttribute("animation__build", {
					property: "scale",
					from: "0 0 0",
					to: "1 1 1",
					dur: 400,
					easing: "easeOutBack"
				});
				
				this.buildIndex++;
				setTimeout(() => this.buildNextPart(), this.data.buildDelay);
			},
			removeShelfPart() {
				if (this.buildIndex <= 0) {
					this.shelfBuilt = false;
					console.log("Étagère déconstruite!");
					return;
				}
				
				this.buildIndex--;
				const part = this.shelfParts[this.buildIndex];
				part.setAttribute("animation__unbuild", {
					property: "scale",
					to: "0 0 0",
					dur: 300,
					easing: "easeInBack"
				});
			},
			tick(time) {
				if (!this.started || !this.shelfBuilt) return;
				
				// Mode rewind : faire disparaître les livres
				if (bookSpawnSpeed < 0) {
					const adjustedInterval = this.data.baseInterval / Math.abs(bookSpawnSpeed);
					
					if (time - this.lastSpawnTime > adjustedInterval) {
						if (this.books.length > 0) {
							this.removeBook();
						}
						this.lastSpawnTime = time;
					}
					return;
				}
				
				// Mode normal ou arrêté
				if (bookSpawnSpeed === 0 || this.bookIndex >= this.bookPositions.length) return;
				
				// Calculer l'intervalle ajusté par la vitesse
				const adjustedInterval = this.data.baseInterval / bookSpawnSpeed;
				
				if (time - this.lastSpawnTime > adjustedInterval) {
					this.spawnBook();
					this.lastSpawnTime = time;
				}
			},
			removeBook() {
				if (this.books.length === 0) return;
				
				const book = this.books.pop();
				this.bookIndex--;
				
				// Animation de disparition
				book.setAttribute("animation__vanish", {
					property: "scale",
					to: "0 0 0",
					dur: 400,
					easing: "easeInBack"
				});
				book.setAttribute("animation__rise", {
					property: "position",
					to: `${book.getAttribute("position").x} ${book.getAttribute("position").y + 0.5} ${book.getAttribute("position").z}`,
					dur: 400,
					easing: "easeInQuad"
				});
				
				// Supprimer après animation
				setTimeout(() => {
					if (book.parentNode) {
						book.parentNode.removeChild(book);
					}
				}, 450);
				
				console.log("Livre retiré:", this.bookIndex, "restants");
			},
			spawnBook() {
				if (this.bookIndex >= this.bookPositions.length) return;
				
				const pos = this.bookPositions[this.bookIndex];
				const color = this.bookColors[this.bookIndex % this.bookColors.length];
				
				// Générer une couleur de tranche plus claire
				const spineColor = this.lightenColor(color, 30);
				const pageColor = "#f5f0e6";
				
				// Créer le conteneur du livre
				const book = document.createElement("a-entity");
				const bookY = this.el.getAttribute("position").y + pos.y;
				book.setAttribute("position", `${pos.x} ${bookY} ${pos.z}`);
				book.setAttribute("rotation", "0 -90 0");
				book.setAttribute("scale", "0 0 0");
				
				// Couverture principale (avant)
				const cover = document.createElement("a-box");
				cover.setAttribute("width", "0.02");
				cover.setAttribute("height", "0.25");
				cover.setAttribute("depth", "0.18");
				cover.setAttribute("position", "0.03 0 0");
				cover.setAttribute("material", `color: ${color}; metalness: 0.1; roughness: 0.7`);
				cover.setAttribute("shadow", "cast: true; receive: true");
				book.appendChild(cover);
				
				// Pages (intérieur blanc/crème)
				const pages = document.createElement("a-box");
				pages.setAttribute("width", "0.05");
				pages.setAttribute("height", "0.23");
				pages.setAttribute("depth", "0.16");
				pages.setAttribute("position", "0 0 0");
				pages.setAttribute("material", `color: ${pageColor}; roughness: 0.9`);
				pages.setAttribute("shadow", "cast: true; receive: true");
				book.appendChild(pages);
				
				// Dos du livre (couverture arrière)
				const back = document.createElement("a-box");
				back.setAttribute("width", "0.02");
				back.setAttribute("height", "0.25");
				back.setAttribute("depth", "0.18");
				back.setAttribute("position", "-0.03 0 0");
				back.setAttribute("material", `color: ${color}; metalness: 0.1; roughness: 0.7`);
				back.setAttribute("shadow", "cast: true; receive: true");
				book.appendChild(back);
				
				// Tranche (spine) - partie visible sur l'étagère
				const spine = document.createElement("a-box");
				spine.setAttribute("width", "0.08");
				spine.setAttribute("height", "0.25");
				spine.setAttribute("depth", "0.02");
				spine.setAttribute("position", "0 0 -0.09");
				spine.setAttribute("material", `color: ${spineColor}; metalness: 0.2; roughness: 0.6`);
				spine.setAttribute("shadow", "cast: true; receive: true");
				book.appendChild(spine);
				
				this.el.appendChild(book);
				
				// Animation d'apparition (scale up)
				setTimeout(() => {
					book.setAttribute("animation__scale", {
						property: "scale",
						from: "0 0 0",
						to: "1 1 1",
						dur: 500,
						easing: "easeOutBack"
					});
					
					// Animation de descente vers l'étagère
					book.setAttribute("animation__fall", {
						property: "position",
						to: `${pos.x} ${pos.y} ${pos.z}`,
						dur: 800,
						easing: "easeOutBounce",
						delay: 200
					});
				}, 50);
				
				this.books.push(book);
				this.bookIndex++;
				
				console.log("Livre apparu:", this.bookIndex, "/ 12");
			},
			
			// Éclaircir une couleur hex
			lightenColor(hex, percent) {
				const num = parseInt(hex.replace('#', ''), 16);
				const amt = Math.round(2.55 * percent);
				const R = Math.min(255, (num >> 16) + amt);
				const G = Math.min(255, ((num >> 8) & 0x00FF) + amt);
				const B = Math.min(255, (num & 0x0000FF) + amt);
				return '#' + (0x1000000 + R * 0x10000 + G * 0x100 + B).toString(16).slice(1);
			}
		});

		// === BOUNDARY: Bloque l'utilisateur dans le cube 4x4x4 ===
		AFRAME.registerComponent("boundary-limit", {
			schema: {
				minX: { type: "number", default: -2 },
				maxX: { type: "number", default: 2 },
				minZ: { type: "number", default: -2 },
				maxZ: { type: "number", default: 2 }
			},
			init() {
				this.camPos = new THREE.Vector3();
			},
			tick() {
				const camera = this.el.sceneEl.camera;
				if (!camera) return;
				
				// Obtenir position monde de la caméra
				camera.getWorldPosition(this.camPos);
				
				const d = this.data;
				let needsClamp = false;
				let clampedX = this.camPos.x;
				let clampedZ = this.camPos.z;
				
				// Vérifier limites X
				if (this.camPos.x < d.minX) { clampedX = d.minX; needsClamp = true; }
				if (this.camPos.x > d.maxX) { clampedX = d.maxX; needsClamp = true; }
				
				// Vérifier limites Z
				if (this.camPos.z < d.minZ) { clampedZ = d.minZ; needsClamp = true; }
				if (this.camPos.z > d.maxZ) { clampedZ = d.maxZ; needsClamp = true; }
				
				// Si hors limites, repositionner le rig
				if (needsClamp) {
					const rigPos = this.el.object3D.position;
					rigPos.x += (clampedX - this.camPos.x);
					rigPos.z += (clampedZ - this.camPos.z);
				}
			}
		});

		// === TIME ZONE: Détection de présence dans les cercles ===
		AFRAME.registerComponent("time-zone", {
			schema: {
				mode: { type: "string", default: "slow" },
				radius: { type: "number", default: 1.0 },
				lightSpeed: { type: "number", default: 5000 },
				beamColor: { type: "string", default: "#ffffff" },
				needleSpeed: { type: "number", default: 3000 }
			},
			init() {
				this.active = false;
				this.light = null;
				this.needleMinute = null;
				this.needleHour = null;
				this.skyBeam = null;
				this.zoneCenter = new THREE.Vector3();
				
				// Trouver les éléments associés
				const id = this.el.id;
				let beamColor = "#ffd080";
				if (id === "zone-left") {
					this.light = document.getElementById("light-left");
					this.needleMinute = document.getElementById("needle-minute-left");
					this.needleHour = document.getElementById("needle-hour-left");
					beamColor = "#9080ff";
				} else if (id === "zone-right") {
					this.light = document.getElementById("light-right");
					this.needleMinute = document.getElementById("needle-minute-right");
					this.needleHour = document.getElementById("needle-hour-right");
					beamColor = "#ff80a0";
				} else if (id === "zone-center") {
					this.light = document.getElementById("light-center");
					this.needleMinute = document.getElementById("needle-minute-center");
					this.needleHour = document.getElementById("needle-hour-center");
					beamColor = "#ffd080";
				}
				
				// Créer le faisceau lumineux du ciel au-dessus de la bibliothèque
				this.skyBeam = document.createElement("a-cylinder");
				this.skyBeam.setAttribute("radius", "1.4");
				this.skyBeam.setAttribute("height", "10");
				this.skyBeam.setAttribute("position", "0 5 -2.5"); // Position de la bibliothèque
				this.skyBeam.setAttribute("material", `color: ${beamColor}; opacity: 0; transparent: true; side: double; emissive: ${beamColor}; emissiveIntensity: 0.15; depthWrite: false`);
				this.skyBeam.setAttribute("scale", "1 1 1");
				// Ajouter à la scène et non au cercle
				this.el.sceneEl.appendChild(this.skyBeam);
			},
			tick() {
				// Récupérer la caméra
				const camera = this.el.sceneEl.camera;
				if (!camera) return;
				
				// Position de la caméra dans le monde
				const camPos = new THREE.Vector3();
				camera.getWorldPosition(camPos);
				
				// Position du cercle
				this.el.object3D.getWorldPosition(this.zoneCenter);
				
				// Distance horizontale uniquement (ignorer Y)
				const dx = camPos.x - this.zoneCenter.x;
				const dz = camPos.z - this.zoneCenter.z;
				const dist = Math.sqrt(dx * dx + dz * dz);
				
				const wasActive = this.active;
				this.active = dist < this.data.radius;
				
				if (this.active && !wasActive) {
					this.enterZone();
				} else if (!this.active && wasActive) {
					this.leaveZone();
				}
			},
			enterZone() {
				console.log("ENTER:", this.data.mode);
				
				// Changer la vitesse du son et l'échelle de l'espace
				if (this.data.mode === "slow") {
					setClockSpeed(0.5); // Ralenti x0.5
					setSpaceScale(1.5, 2000); // Espace s'étend
					setBookSpawnSpeed(0.3); // Livres apparaissent lentement
				} else if (this.data.mode === "fast") {
					setClockSpeed(2.0); // Accéléré x2
					setSpaceScale(0.6, 1000); // Espace se contracte
					setBookSpawnSpeed(4.0); // Livres apparaissent rapidement
				} else if (this.data.mode === "rewind") {
					setClockSpeed(0.5); // Son ralenti (effet rewind)
					setSpaceScale(0.8, 1500); // Légère contraction
					setBookSpawnSpeed(-2.0); // Livres disparaissent (négatif = rewind)
				} else if (this.data.mode === "stop") {
					pauseClockAudio(); // Arrêter le temps (pause audio)
					setSpaceScale(1.2, 500); // Légère expansion
					setBookSpawnSpeed(0); // Livres figés
				}
				
				// Activer le faisceau lumineux du ciel
				if (this.skyBeam) {
					this.skyBeam.removeAttribute("animation__beam");
					this.skyBeam.setAttribute("animation__beam", {
						property: "material.opacity",
						from: 0,
						to: 0.1,
						dur: 500,
						easing: "easeOutQuad"
					});
				}
				
				// Activer l'aiguille des minutes (rotation rapide) - SAUF en mode stop
				if (this.needleMinute && this.data.mode !== "stop") {
					const rotDir = this.data.mode === "rewind" ? "-360" : "360";
					this.needleMinute.setAttribute("animation__spin", {
						property: "rotation",
						to: "0 " + rotDir + " 0",
						loop: true,
						dur: this.data.needleSpeed,
						easing: "linear"
					});
				}
				
				// Activer l'aiguille des heures (12x plus lente) - SAUF en mode stop
				if (this.needleHour && this.data.mode !== "stop") {
					const rotDir = this.data.mode === "rewind" ? "-360" : "360";
					this.needleHour.setAttribute("animation__spin", {
						property: "rotation",
						to: "0 " + rotDir + " 0",
						loop: true,
						dur: this.data.needleSpeed * 12,
						easing: "linear"
					});
				}
			},
			leaveZone() {
				console.log("LEAVE:", this.data.mode);
				
				// Si on quitte la zone stop, reprendre le son
				if (this.data.mode === "stop") {
					resumeClockAudio();
				}
				
				// Revenir à la vitesse normale
				setClockSpeed(1.0);
				
				// Revenir à l'échelle normale de l'espace
				setSpaceScale(1, 1500);
				
				// Revenir à la vitesse normale des livres
				setBookSpawnSpeed(1.0);
				
				// Désactiver le faisceau lumineux
				if (this.skyBeam) {
					this.skyBeam.removeAttribute("animation__beam");
					this.skyBeam.setAttribute("animation__beam", {
						property: "material.opacity",
						to: 0,
						dur: 300,
						easing: "easeInQuad"
					});
				}
				
				// Désactiver les aiguilles
				if (this.needleMinute) {
					this.needleMinute.removeAttribute("animation__spin");
				}
				if (this.needleHour) {
					this.needleHour.removeAttribute("animation__spin");
				}
			}
		});
	</script>
</head>
<body>
	<!-- Son d'horloge en fond -->
	<audio id="clock-audio" loop>
		<source src="./Echoing Clock Tick  HQ Sound Effect (online-video-cutter.com).mp3" type="audio/mpeg">
	</audio>
	
	<div id="hud">
		<strong>Interstellar × Rolex</strong><br>
		Marchez sur un cercle pour modifier le temps.<br>
		⬅ Gauche : rewind | Centre : ralenti | Droite : accéléré ➡
	</div>
	<div id="debug">Cliquez pour activer le son</div>

	<a-scene shadow="type: pcfsoft" renderer="colorManagement: true; exposure: 1.2">
		<!-- Assets - ne bloque pas la scène si les modèles mettent du temps -->
		<a-assets timeout="10000">
			<img id="space360" src="./space360.jpg" crossorigin="anonymous">
		</a-assets>

		<!-- Éclairage ambiant -->
		<a-entity light="type: ambient; color: #6080a0; intensity: 0.5"></a-entity>
		<a-entity light="type: directional; color: #ffe0c0; intensity: 0.4" position="1 3 1"></a-entity>

		<!-- Skybox 360 (monde extérieur) -->
		<a-sky id="skybox" src="#space360" rotation="0 -90 0" scale="1 1 1"></a-sky>

		<!-- Cube 4x4x4 (limites invisibles) -->

		<!-- ========== CERCLE GAUCHE (REWIND) ========== -->
		<a-entity id="zone-left" position="-1.8 0.01 0" 
			time-zone="mode: rewind; radius: 0.55; lightSpeed: 4000; needleSpeed: 2000">
			
			<!-- Anneau violet -->
			<a-ring radius-inner="0.45" radius-outer="0.52" rotation="-90 0 0" 
				material="color: #6a5acd; opacity: 0.9; metalness: 0.6"></a-ring>
			<a-ring radius-inner="0.22" radius-outer="0.24" rotation="-90 0 0" 
				material="color: #6a5acd; opacity: 0.6"></a-ring>
			
			<!-- Aiguille des minutes (longue, rapide) -->
			<a-entity id="needle-minute-left" position="0 0.03 0" rotation="0 0 0">
				<a-box width="0.40" height="0.008" depth="0.012" position="0.17 0 0" 
					material="color: #6a5acd; metalness: 0.8"></a-box>
			</a-entity>
			
			<!-- Aiguille des heures (courte, lente) -->
			<a-entity id="needle-hour-left" position="0 0.05 0" rotation="0 90 0">
				<a-box width="0.28" height="0.012" depth="0.016" position="0.10 0 0" 
					material="color: #483d8b; metalness: 0.8"></a-box>
			</a-entity>
		</a-entity>

		<!-- Lumière gauche -->
		<a-entity id="light-left" position="-1.8 1.2 0">
			<a-entity light="type: spot; color: #9080ff; intensity: 0; angle: 45; penumbra: 0.5; castShadow: true" 
				position="0 0 0" rotation="-90 0 0"></a-entity>
		</a-entity>

		<!-- Pile de livres (modèle 3D) sur cercle rewind -->
		<a-entity id="books" position="-1.8 0 0">
			<a-gltf-model src="./stack_of_books.glb" shadow="cast: true; receive: true" 
				scale="0.15 0.15 0.15" position="0 0.10 0"></a-gltf-model>
		</a-entity>

		<!-- ========== CERCLE DROIT (FAST) ========== -->
		<a-entity id="zone-right" position="1.8 0.01 0" 
			time-zone="mode: fast; radius: 0.55; lightSpeed: 1500; needleSpeed: 800">
			
			<!-- Anneau rose -->
			<a-ring radius-inner="0.45" radius-outer="0.52" rotation="-90 0 0" 
				material="color: #e85f8d; opacity: 0.9; metalness: 0.6"></a-ring>
			<a-ring radius-inner="0.22" radius-outer="0.24" rotation="-90 0 0" 
				material="color: #e85f8d; opacity: 0.6"></a-ring>
			
			<!-- Aiguille des minutes (longue, rapide) -->
			<a-entity id="needle-minute-right" position="0 0.03 0" rotation="0 0 0">
				<a-box width="0.40" height="0.008" depth="0.012" position="0.17 0 0" 
					material="color: #e85f8d; metalness: 0.8"></a-box>
			</a-entity>
			
			<!-- Aiguille des heures (courte, lente) -->
			<a-entity id="needle-hour-right" position="0 0.05 0" rotation="0 90 0">
				<a-box width="0.28" height="0.012" depth="0.016" position="0.10 0 0" 
					material="color: #d04a78; metalness: 0.8"></a-box>
			</a-entity>
		</a-entity>

		<!-- Lumière droite -->
		<a-entity id="light-right" position="1.8 1.2 0">
			<a-entity light="type: spot; color: #ff80a0; intensity: 0; angle: 45; penumbra: 0.5; castShadow: true" 
				position="0 0 0" rotation="-90 0 0"></a-entity>
		</a-entity>

		<!-- Casque astronaute (modèle 3D) -->
		<a-entity id="helmet" position="1.8 0 0">
			<a-gltf-model src="./astronaut_helmet.glb" shadow="cast: true; receive: true" 
				scale="0.018 0.018 0.018" position="0 0.0 0" rotation="-15 0 0"></a-gltf-model>
		</a-entity>

		<!-- ========== BOOKCASE (MODÈLE 3D) ========== -->
		<a-entity id="bookcase" position="-0.5 0 -2.5" rotation="0 -90 0" bookshelf-spawner="baseInterval: 2000; maxBooks: 12">
			<a-gltf-model src="/bookcase.glb" 
				shadow="cast: true; receive: true"
				scale="1 1 1" 
				position="-0.3 0 0.6">
			</a-gltf-model>
		</a-entity>

		<!-- ========== CERCLE CENTRAL (STOP TIME) ========== -->
		<a-entity id="zone-center" position="0 0.01 0" 
			time-zone="mode: stop; radius: 0.55; lightSpeed: 9000; needleSpeed: 6000">
			
			<!-- Anneau doré -->
			<a-ring radius-inner="0.45" radius-outer="0.52" rotation="-90 0 0" 
				material="color: #d9b066; opacity: 0.9; metalness: 0.6"></a-ring>
			<a-ring radius-inner="0.22" radius-outer="0.24" rotation="-90 0 0" 
				material="color: #d9b066; opacity: 0.6"></a-ring>
			
			<!-- Aiguille des minutes (longue, rapide) -->
			<a-entity id="needle-minute-center" position="0 0.03 0" rotation="0 0 0">
				<a-box width="0.40" height="0.008" depth="0.012" position="0.17 0 0" 
					material="color: #d9b066; metalness: 0.8"></a-box>
			</a-entity>
			
			<!-- Aiguille des heures (courte, lente) -->
			<a-entity id="needle-hour-center" position="0 0.05 0" rotation="0 90 0">
				<a-box width="0.28" height="0.012" depth="0.016" position="0.10 0 0" 
					material="color: #c9a050; metalness: 0.8"></a-box>
			</a-entity>
		</a-entity>

		<!-- Lumière centrale -->
		<a-entity id="light-center" position="0 1.2 0">
			<a-entity light="type: spot; color: #ffd080; intensity: 0; angle: 45; penumbra: 0.5; castShadow: true" 
				position="0 0 0" rotation="-90 0 0"></a-entity>
		</a-entity>

		<!-- Caméra avec limites -->
		<a-entity id="rig" position="0 0 1.5" boundary-limit>
			<a-camera wasd-controls="acceleration: 8" look-controls position="0 1.8 0">
				<a-cursor color="#d9b066" fuse="false" raycaster="objects: none"></a-cursor>
			</a-camera>
		</a-entity>
	</a-scene>
</body>
</html>
